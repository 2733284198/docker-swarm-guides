> **编者提示：**法定人数（quorum）可以理解为一个投非弃权票的人数，这个人数保证投票不会完全没有结果。选举结果是要求票数超过参加投票的总人数（包括投弃权票的人）的半数以上的人赞成的意向。投非弃权票的人数，如果小于法定人数，则选举是没有投票结果的。例如，3个manager的法定人数就是2，其中有1个弃权，同样有可能有投票结果，只要剩下的2个manager投同样的票，投票数就会超过3的半数。4个manager中，法定人数是3，而不是2。与3个manager情况相同，当1个人弃权时还可能有投票结果。但是2个人弃权时，是没有办法得到一个投票结果的，因为票数如何也超不过4的半数。所以，3个manager和4个mananger的情况都只能允许1个manager投弃权票，两种情况在算法上要达到的结果是一样的。在失去法定人数（quorum）的情况下，选举算法是无论如何也没有结果的。

# Swarm管理维护指南

当我们运行一个Docker Engine集群时，manage节点是管理Swarm和存储Swarm状态的关键组件。所以为了更好的管理维护，了解manager节点的一些关键特性是很重要的。




















# From the node to recover
docker swarm init --force-new-cluster --advertise-addr node01:2377

```

## 强制平衡

通常情况下我们不需要重新平衡task在节点上的分配。只有当我们新加了节点，或者一个节点重新接入Swarm时，Swarm不会自动将已存在的task按照新的节点个数从新在节点之间分配。这种设计的初衷是防止增加节点时，如果task重新分配会造成客户端访问的阻断。

在Docker 1.13或者更高版本，我们可以在命令`docker service update`使用使用`--force`或者`-f`参数来从新分配task。这会造成Service的task滚动重启。

























